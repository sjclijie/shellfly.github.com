
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>git history - 翼をください</title>
  <meta name="author" content="shellfly">

  
  <meta name="description" content="Git History Jan 22nd, 2013 | Comments 修改上一次commit git commit --amend,如果上次提交后没有做任何修改，运行这个命令可以修改上次提交的message，如果你发现少提交了一个文件，或者有其他小的改动
觉得应该放在上一个commit里面 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://shellfly.github.com/blog/2013/01/22/all-about-git-history/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="翼をください" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body >
  <header role="banner" id="sidebar">
    <!-- Logo 
<aside id="logo" class="clearfix">
  <div class="clearfix">
    <a href="/">翼をください</a>
  </div>
</aside>-->

<ul id="menu">

  <li class="title">
    <h1 id="title"><a href="/">翼をください</a></h1>
  </li>




<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:shellfly.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>



  <li class="link">
    <a href="/blog/archives/">archives</a>
  </li>
  <li class="link">
    <a href="/about/">about</a>
  </li>


</ul>

  </header>
  <section id="main">
    <article class="post">
  <div class="sharing-box">
  
  
  
</div>

  
  <header>
    
      <h2 class="entry-title">Git History</h2>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-22T00:08:00+08:00" pubdate data-updated="true">Jan 22<span>nd</span>, 2013</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<h3>修改上一次commit</h3>

<p><code>git commit --amend</code>,如果上次提交后没有做任何修改，运行这个命令可以修改上次提交的message，如果你发现少提交了一个文件，或者有其他小的改动
觉得应该放在上一个commit里面，就可以在commit最后加上<code>--amend</code> 参数，来更新上次commit。</p>

<h3>查看历史记录 git log vs git reflog</h3>

<p>平时大家一般都习惯使用 <code>git log</code> 查看当前commit记录，但是默认只显示出当前的最新状态，如果一个commit被其他命令删除，这里是就看不见了。
<code>git reflog</code> 则记录了目前为止的所有动作，包括经过的所有commit。要想恢复一个被删除的commit,<code>git reflog</code> 是不二之选。<code>git reflog</code>
其实就是<code>git log -g --abbrev-commit --pretty=oneline</code>的一个alias。</p>

<h3>撤销commit git revert vs git reset</h3>

<!-- more -->


<p><code>git revert &lt;commit&gt;</code> 会创建一个新的commit,这个commit会撤销命令里给出的commit的所有操作，并且不会修改原有commit历史记录。要撤销最近一次commit最好的办法就是使用<code>git revert</code>。当然也可
以指定很多commit 这些commit会被一一撤销，如果有中间出现冲突，需要像<code>git merge</code>那样手动解决冲突。</p>

<p><code>git reset (--soft | --mixed | --hard | --merge | --keep) [-q] [&lt;commit&gt;]</code> 恢复到指定的commit，会修改commit的历史记录,可以回溯到任一commit,就像时光倒流一样，这也是版本控制的好处所在。</p>

<ul>
<li><p><code>--soft</code>
只是把当前HEAD指向commit，并不改变index和work tree里的文件，所有和commit不同的文件都会变成“changes to be commited”</p></li>
<li><p><code>--mixed</code>
默认选项，除了把HEAD指向commit外，还会更新index文件，但不影响work tree里的文件。</p></li>
<li><p><code>--hard</code>
把HEAD指向commit，并且更新index和work tree里的文件，如果想彻底删除一个commit，可以选择这个命令</p></li>
</ul>




</article>

  <section class="comments">
    <h2>Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>


    <nav role="navigation" id="pagination">

</nav>
  </section>
  <!-- Octopress Love -->
<footer id="octopress_linkback">
  <a href="http://octopress.org/">
    <span class="unicode_square">
      <span class="unicode_circle">
        &nbsp;
      </span>
    </span>
    <span class="octopress">Powered by Octopress</span>
 </a>
 <span class="small">(<a href="/atom.xml">rss</a>)</span>
 </footer>


  

<script type="text/javascript">
      var disqus_shortname = 'shellfly';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://shellfly.github.com/blog/2013/01/22/all-about-git-history/';
        var disqus_url = 'http://shellfly.github.com/blog/2013/01/22/all-about-git-history/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>










</body>
</html>
